{"ast":null,"code":"var _jsxFileName = \"/Users/invotradesign/CascadeProjects/site-users-app/src/components/OrgChart.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Tree from 'react-d3-tree';\nimport { useUsers } from './UserContext';\nimport { Box, Card, Avatar, Typography, useTheme, alpha } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OrgChart = () => {\n  _s();\n  const theme = useTheme();\n  const {\n    users\n  } = useUsers();\n  const [treeData, setTreeData] = useState(null);\n  useEffect(() => {\n    const buildTreeData = users => {\n      if (!users.length) return null;\n\n      // Find the root (CEO or user without managerId)\n      const root = users.find(user => !user.managerId);\n      if (!root) return null;\n      const buildNode = user => {\n        const children = users.filter(u => u.managerId === user.id).map(child => buildNode(child));\n        return {\n          name: user.name,\n          attributes: {\n            name: user.name,\n            role: user.jobRole,\n            imageUrl: user.imageUrl || ''\n          },\n          children: children.length ? children : []\n        };\n      };\n      return buildNode(root);\n    };\n    const data = buildTreeData(users);\n    setTreeData(data);\n  }, [users]);\n  const renderCustomNode = ({\n    nodeDatum\n  }) => {\n    var _nodeDatum$attributes, _nodeDatum$attributes2, _nodeDatum$attributes3, _nodeDatum$attributes4, _nodeDatum$attributes5, _nodeDatum$attributes6;\n    return /*#__PURE__*/_jsxDEV(Card, {\n      sx: {\n        p: 1,\n        minWidth: 200,\n        bgcolor: alpha(theme.palette.background.paper, 0.9),\n        boxShadow: 3,\n        borderRadius: 2\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          src: ((_nodeDatum$attributes = nodeDatum.attributes) === null || _nodeDatum$attributes === void 0 ? void 0 : _nodeDatum$attributes.imageUrl) || '',\n          alt: ((_nodeDatum$attributes2 = nodeDatum.attributes) === null || _nodeDatum$attributes2 === void 0 ? void 0 : _nodeDatum$attributes2.name) || '',\n          sx: {\n            width: 40,\n            height: 40\n          },\n          children: ((_nodeDatum$attributes3 = nodeDatum.attributes) === null || _nodeDatum$attributes3 === void 0 ? void 0 : (_nodeDatum$attributes4 = _nodeDatum$attributes3.name) === null || _nodeDatum$attributes4 === void 0 ? void 0 : _nodeDatum$attributes4[0]) || ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle2\",\n            noWrap: true,\n            children: ((_nodeDatum$attributes5 = nodeDatum.attributes) === null || _nodeDatum$attributes5 === void 0 ? void 0 : _nodeDatum$attributes5.name) || ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            color: \"textSecondary\",\n            noWrap: true,\n            children: ((_nodeDatum$attributes6 = nodeDatum.attributes) === null || _nodeDatum$attributes6 === void 0 ? void 0 : _nodeDatum$attributes6.role) || ''\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }, this);\n  };\n  if (!treeData) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        children: \"Loading organization chart...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      width: '100%',\n      height: '100vh'\n    },\n    children: /*#__PURE__*/_jsxDEV(Tree, {\n      data: treeData,\n      renderCustomNodeElement: renderCustomNode,\n      orientation: \"vertical\",\n      pathFunc: \"step\",\n      translate: {\n        x: window.innerWidth / 2,\n        y: 50\n      },\n      separation: {\n        siblings: 2,\n        nonSiblings: 2.5\n      },\n      zoom: 0.7,\n      nodeSize: {\n        x: 250,\n        y: 100\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n};\n_s(OrgChart, \"F7245so3OF9hcjXcZXjvT0Rn2ug=\", false, function () {\n  return [useTheme, useUsers];\n});\n_c = OrgChart;\nexport default OrgChart;\nvar _c;\n$RefreshReg$(_c, \"OrgChart\");","map":{"version":3,"names":["React","useEffect","useState","Tree","useUsers","Box","Card","Avatar","Typography","useTheme","alpha","jsxDEV","_jsxDEV","OrgChart","_s","theme","users","treeData","setTreeData","buildTreeData","length","root","find","user","managerId","buildNode","children","filter","u","id","map","child","name","attributes","role","jobRole","imageUrl","data","renderCustomNode","nodeDatum","_nodeDatum$attributes","_nodeDatum$attributes2","_nodeDatum$attributes3","_nodeDatum$attributes4","_nodeDatum$attributes5","_nodeDatum$attributes6","sx","p","minWidth","bgcolor","palette","background","paper","boxShadow","borderRadius","display","alignItems","gap","src","alt","width","height","fileName","_jsxFileName","lineNumber","columnNumber","variant","noWrap","color","renderCustomNodeElement","orientation","pathFunc","translate","x","window","innerWidth","y","separation","siblings","nonSiblings","zoom","nodeSize","_c","$RefreshReg$"],"sources":["/Users/invotradesign/CascadeProjects/site-users-app/src/components/OrgChart.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Tree, { RawNodeDatum, CustomNodeElementProps } from 'react-d3-tree';\nimport { User } from '../types/User';\nimport { useUsers } from './UserContext';\nimport {\n  Box,\n  Card,\n  Avatar,\n  Typography,\n  useTheme,\n  alpha\n} from '@mui/material';\n\ninterface OrgChartNodeData extends RawNodeDatum {\n  attributes?: {\n    name: string;\n    role: string;\n    imageUrl: string;\n  };\n}\n\ninterface CustomNodeProps extends CustomNodeElementProps {\n  nodeDatum: OrgChartNodeData;\n}\n\nconst OrgChart: React.FC = () => {\n  const theme = useTheme();\n  const { users } = useUsers();\n  const [treeData, setTreeData] = useState<OrgChartNodeData | null>(null);\n\n  useEffect(() => {\n    const buildTreeData = (users: User[]): OrgChartNodeData | null => {\n      if (!users.length) return null;\n\n      // Find the root (CEO or user without managerId)\n      const root = users.find(user => !user.managerId);\n      if (!root) return null;\n\n      const buildNode = (user: User): OrgChartNodeData => {\n        const children = users\n          .filter(u => u.managerId === user.id)\n          .map(child => buildNode(child));\n\n        return {\n          name: user.name,\n          attributes: {\n            name: user.name,\n            role: user.jobRole,\n            imageUrl: user.imageUrl || ''\n          },\n          children: children.length ? children : []\n        };\n      };\n\n      return buildNode(root);\n    };\n\n    const data = buildTreeData(users);\n    setTreeData(data);\n  }, [users]);\n\n  const renderCustomNode = ({ nodeDatum }: CustomNodeProps) => (\n    <Card\n      sx={{\n        p: 1,\n        minWidth: 200,\n        bgcolor: alpha(theme.palette.background.paper, 0.9),\n        boxShadow: 3,\n        borderRadius: 2\n      }}\n    >\n      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n        <Avatar\n          src={nodeDatum.attributes?.imageUrl || ''}\n          alt={nodeDatum.attributes?.name || ''}\n          sx={{ width: 40, height: 40 }}\n        >\n          {nodeDatum.attributes?.name?.[0] || ''}\n        </Avatar>\n        <Box>\n          <Typography variant=\"subtitle2\" noWrap>\n            {nodeDatum.attributes?.name || ''}\n          </Typography>\n          <Typography variant=\"caption\" color=\"textSecondary\" noWrap>\n            {nodeDatum.attributes?.role || ''}\n          </Typography>\n        </Box>\n      </Box>\n    </Card>\n  );\n\n  if (!treeData) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Typography>Loading organization chart...</Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ width: '100%', height: '100vh' }}>\n      <Tree\n        data={treeData}\n        renderCustomNodeElement={renderCustomNode}\n        orientation=\"vertical\"\n        pathFunc=\"step\"\n        translate={{ x: window.innerWidth / 2, y: 50 }}\n        separation={{ siblings: 2, nonSiblings: 2.5 }}\n        zoom={0.7}\n        nodeSize={{ x: 250, y: 100 }}\n      />\n    </Box>\n  );\n};\n\nexport default OrgChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}