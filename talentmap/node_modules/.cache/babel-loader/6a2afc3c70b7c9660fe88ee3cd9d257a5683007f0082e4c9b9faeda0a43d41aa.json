{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport G6 from '@antv/g6';\nimport { isEqual, isObject, isString, omit } from '@antv/util';\nimport { useEffect, useRef } from 'react';\nimport { deepClone, getAnchorPoints, getArrowCfg, getCommonCfg, getGraphId, getGraphSize, getMarkerPosition, renderGraph, getCenterNode, bindStateEvents, runAsyncEvent, getRenderData } from '../utils';\nimport { processMinimap, processTooltip, processMenu, processToolbar } from '../plugins';\nimport { setGlobalInstance } from '../utils/global';\nexport default function useGraph(graphClass, config, extra) {\n  if (extra === void 0) {\n    extra = {};\n  }\n  var container = useRef(null);\n  var graphRef = useRef();\n  var graphOptions = useRef();\n  // data 单独处理，会被 G6 修改\n  var graphData = useRef();\n  var data = config.data,\n    width = config.width,\n    height = config.height,\n    layout = config.layout,\n    minimapCfg = config.minimapCfg,\n    behaviors = config.behaviors,\n    fitCenter = config.fitCenter,\n    nodeCfg = config.nodeCfg,\n    edgeCfg = config.edgeCfg,\n    markerCfg = config.markerCfg,\n    level = config.level,\n    toolbarCfg = config.toolbarCfg,\n    tooltipCfg = config.tooltipCfg,\n    menuCfg = config.menuCfg,\n    customLayout = config.customLayout;\n  var graph = graphRef.current;\n  /** 隐藏孤立边 */\n  var setEdgesState = function (edges) {\n    edges.forEach(function (edge) {\n      var _a, _b;\n      var _c = edge.getModel(),\n        source = _c.source,\n        target = _c.target;\n      var sourceVisible = (_a = graph === null || graph === void 0 ? void 0 : graph.findById(source)) === null || _a === void 0 ? void 0 : _a.get('visible');\n      var targetVisible = (_b = graph === null || graph === void 0 ? void 0 : graph.findById(target)) === null || _b === void 0 ? void 0 : _b.get('visible');\n      if (sourceVisible === false || targetVisible === false) {\n        edge.changeVisibility(false);\n      }\n    });\n  };\n  var changeData = function () {\n    var _a;\n    var _b;\n    if (!graph) return;\n    var originData = data;\n    var tagData = originData;\n    if (level) _a = getRenderData(data, level), originData = _a[0], tagData = _a[1];\n    graph.changeData(originData);\n    (_b = graph.get('eventData')) === null || _b === void 0 ? void 0 : _b.setData(tagData);\n    setEdgesState(graph.getEdges());\n    if (fitCenter) {\n      graph.fitCenter();\n    }\n    runAsyncEvent(graph.get('id'));\n  };\n  var updateLayout = function () {\n    graph === null || graph === void 0 ? void 0 : graph.updateLayout(layout);\n    if (fitCenter) {\n      graph === null || graph === void 0 ? void 0 : graph.fitCenter();\n    }\n  };\n  var updateNodes = function () {\n    if (!graph) {\n      return;\n    }\n    var _a = nodeCfg !== null && nodeCfg !== void 0 ? nodeCfg : {},\n      nodeType = _a.type,\n      nodeAnchorPoints = _a.anchorPoints,\n      nodeStyle = _a.style,\n      nodeLabelCfg = _a.title;\n    graph.getNodes().forEach(function (node) {\n      var anchorPoints = getAnchorPoints(nodeAnchorPoints, node.getModel());\n      graph.updateItem(node, {\n        nodeCfg: nodeCfg,\n        markerCfg: markerCfg,\n        type: nodeType,\n        style: nodeStyle,\n        anchorPoints: anchorPoints,\n        labelCfg: nodeLabelCfg\n      });\n    });\n    runAsyncEvent(graph.get('id'));\n  };\n  var updateEdges = function () {\n    if (!graph) {\n      return;\n    }\n    var _a = edgeCfg !== null && edgeCfg !== void 0 ? edgeCfg : {},\n      edgeType = _a.type,\n      edgeStyle = _a.style,\n      startArrowCfg = _a.startArrow,\n      endArrowCfg = _a.endArrow,\n      labelCfg = _a.label;\n    graph.getEdges().forEach(function (edge) {\n      // 资金流向图&来源去向图\n      if (['fund-line', 'labels-line'].includes(edgeType)) {\n        graph.updateItem(edge, {\n          edgeCfg: edgeCfg\n        });\n      } else {\n        var edgeCfgModel = edge.getModel();\n        var startArrow = getArrowCfg(startArrowCfg, edgeCfgModel);\n        var endArrow = getArrowCfg(endArrowCfg, edgeCfgModel);\n        var _a = labelCfg !== null && labelCfg !== void 0 ? labelCfg : {},\n          style = _a.style,\n          content = _a.content;\n        graph.updateItem(edge, {\n          type: edgeType,\n          label: getCommonCfg(content, edgeCfgModel, graph),\n          labelCfg: {\n            style: getCommonCfg(style, edgeCfgModel, graph)\n          },\n          style: __assign({\n            stroke: '#ccc',\n            startArrow: startArrow,\n            endArrow: endArrow\n          }, typeof edgeStyle === 'function' ? edgeStyle(edgeCfgModel, graph) : edgeStyle)\n        });\n      }\n    });\n  };\n  // 目前仅支持更新位置\n  var updateMarker = function () {\n    if (!graph) {\n      return;\n    }\n    graph.getNodes().forEach(function (node) {\n      var _a = (typeof markerCfg === 'function' ? markerCfg(node.getModel(), node.get('group')) : markerCfg).position,\n        position = _a === void 0 ? 'right' : _a;\n      var _b = node.getBBox(),\n        width = _b.width,\n        height = _b.height;\n      var markerShape = node.get('group').get('children').find(function (item) {\n        return item.get('name') === 'collapse-icon';\n      });\n      if (markerShape) {\n        markerShape === null || markerShape === void 0 ? void 0 : markerShape.attr(__assign({}, getMarkerPosition(position, [width, height])));\n      }\n    });\n  };\n  var getEdgeStateStyles = function (edgeStateStyles) {\n    var _a = extra.name,\n      name = _a === void 0 ? '' : _a;\n    if (name !== 'FundFlowGraph') {\n      return edgeStateStyles;\n    }\n    if (!edgeStateStyles) {\n      return;\n    }\n    var _b = edgeStateStyles.hover,\n      hover = _b === void 0 ? {} : _b;\n    var endArrow = hover.endArrow,\n      startArrow = hover.startArrow;\n    if (!endArrow && !startArrow) {\n      return edgeStateStyles;\n    }\n    return {\n      hover: __assign(__assign({}, hover), {\n        endArrow: endArrow ? getArrowCfg(endArrow) : false,\n        startArrow: startArrow ? getArrowCfg(startArrow) : false\n      })\n    };\n  };\n  useEffect(function () {\n    var _a;\n    if (graph && !graph.destroyed) {\n      if (isEqual(data, graphData.current)) {\n        return;\n      }\n      if (extra.name === 'RadialGraph' && !((_a = graphData.current.nodes) === null || _a === void 0 ? void 0 : _a.length)) {\n        var centerNode = getCenterNode(data);\n        graph.set('centerNode', centerNode);\n        graph.updateLayout(__assign(__assign({}, layout), {\n          focusNode: centerNode\n        }));\n      } else {\n        changeData();\n      }\n      graphData.current = deepClone(data);\n    }\n  }, [data]);\n  useEffect(function () {\n    var _a, _b, _c, _d, _e;\n    if (graph && !graph.destroyed) {\n      if (isEqual(config, graphOptions.current)) {\n        return;\n      }\n      if (!customLayout && !isEqual(layout, (_a = graphOptions.current) === null || _a === void 0 ? void 0 : _a.layout)) {\n        updateLayout();\n      }\n      if (!isEqual(minimapCfg, (_b = graphOptions.current) === null || _b === void 0 ? void 0 : _b.minimapCfg)) {\n        processMinimap(minimapCfg, graph);\n      }\n      if (!isEqual(nodeCfg, (_c = graphOptions.current) === null || _c === void 0 ? void 0 : _c.nodeCfg)) {\n        updateNodes();\n      }\n      if (!isEqual(edgeCfg, (_d = graphOptions.current) === null || _d === void 0 ? void 0 : _d.edgeCfg)) {\n        updateEdges();\n      }\n      if (!isEqual(markerCfg, (_e = graphOptions.current) === null || _e === void 0 ? void 0 : _e.markerCfg)) {\n        updateMarker();\n      }\n      graphOptions.current = config;\n    }\n  }, [config]);\n  useEffect(function () {\n    if (graph && !graph.destroyed) {\n      var graphSize = getGraphSize(width, height, container);\n      graph.changeSize(graphSize[0], graphSize[1]);\n    }\n  }, [container, width, height]);\n  useEffect(function () {\n    if (graph && !graph.destroyed) {\n      var defaultMode = graph.get('modes').default;\n      var removingBehaviors_1 = [];\n      defaultMode.forEach(function (be) {\n        if (isObject(be)) {\n          removingBehaviors_1.push(be.type);\n        } else if (isString(be)) {\n          removingBehaviors_1.push(be);\n        }\n      });\n      graph.removeBehaviors(removingBehaviors_1, 'default');\n      graph.addBehaviors(behaviors, 'default');\n    }\n  }, [behaviors]);\n  useEffect(function () {\n    if (container.current && graphClass && !graphRef.current) {\n      var _a = extra.name,\n        name_1 = _a === void 0 ? '' : _a,\n        bindEvents = extra.bindEvents;\n      var graphSize = getGraphSize(width, height, container);\n      var nodeCfg_1 = config.nodeCfg,\n        edgeCfg_1 = config.edgeCfg,\n        _b = config.behaviors,\n        behaviors_1 = _b === void 0 ? [] : _b,\n        layout_1 = config.layout,\n        animate = config.animate,\n        autoFit = config.autoFit,\n        fitCenter_1 = config.fitCenter,\n        onReady = config.onReady,\n        customLayout_1 = config.customLayout,\n        fetchLoading = config.fetchLoading;\n      var _c = nodeCfg_1 !== null && nodeCfg_1 !== void 0 ? nodeCfg_1 : {},\n        nodeType_1 = _c.type,\n        nodeAnchorPoints_1 = _c.anchorPoints,\n        nodeStateStyles = _c.nodeStateStyles,\n        nodeStyle_1 = _c.style,\n        nodeLabelCfg_1 = _c.title,\n        linkCenter = _c.linkCenter,\n        getChildren = _c.getChildren,\n        asyncData = _c.asyncData;\n      var _d = edgeCfg_1 !== null && edgeCfg_1 !== void 0 ? edgeCfg_1 : {},\n        edgeType = _d.type,\n        edgeStyle_1 = _d.style,\n        startArrowCfg_1 = _d.startArrow,\n        endArrowCfg_1 = _d.endArrow,\n        labelCfg_1 = _d.label,\n        edgeStateStyles = _d.edgeStateStyles;\n      var graphConfig = {\n        container: container.current,\n        width: graphSize[0],\n        height: graphSize[1],\n        animate: animate,\n        linkCenter: linkCenter,\n        modes: {\n          default: behaviors_1\n        },\n        defaultNode: __assign(__assign({}, nodeCfg_1), {\n          nodeCfg: nodeCfg_1\n        }),\n        defaultEdge: __assign(__assign({}, omit(edgeCfg_1, ['label'])), {\n          edgeCfg: edgeCfg_1,\n          labelCfg: labelCfg_1 === null || labelCfg_1 === void 0 ? void 0 : labelCfg_1.style\n        }),\n        nodeStateStyles: nodeStateStyles,\n        edgeStateStyles: getEdgeStateStyles(edgeStateStyles),\n        layout: customLayout_1 ? undefined : layout_1,\n        fitView: autoFit,\n        fitCenter: fitCenter_1,\n        extraPlugin: {\n          getChildren: getChildren,\n          fetchLoading: fetchLoading\n        },\n        markerCfg: markerCfg\n      };\n      graphRef.current = new G6[graphClass](graphConfig);\n      var graphId_1 = getGraphId(graphRef.current, name_1);\n      var graph_1 = graphRef.current;\n      graph_1.set('id', graphId_1);\n      setGlobalInstance(graphId_1, graph_1);\n      var customNode_1 = ['fund-card', 'indicator-card', 'file-tree-node', 'organization-card'];\n      var getLabel_1 = function (value) {\n        // 辐射树图\n        if (isString(value)) {\n          return value;\n        }\n        if (name_1 === 'FundFlowGraph') {\n          return value === null || value === void 0 ? void 0 : value.text;\n        }\n        return value === null || value === void 0 ? void 0 : value.title;\n      };\n      // defaultNode 默认只能绑定 plainObject，针对 Function 类型需要通过该模式绑定\n      graph_1.node(function (node) {\n        if (customNode_1.includes(nodeType_1)) {\n          var anchorPoints = getAnchorPoints(nodeAnchorPoints_1, node);\n          node.markerCfg = markerCfg;\n          node.edgeCfg = edgeCfg_1;\n          return {\n            anchorPoints: anchorPoints,\n            _draggable: behaviors_1.includes('drag-node'),\n            _graphId: graphId_1\n          };\n        }\n        var style = (nodeLabelCfg_1 !== null && nodeLabelCfg_1 !== void 0 ? nodeLabelCfg_1 : {}).style;\n        return {\n          _graphId: graphId_1,\n          label: getLabel_1(node.value),\n          labelCfg: {\n            style: getCommonCfg(style, node, graph_1)\n          },\n          style: __assign({\n            stroke: '#ccc'\n          }, typeof nodeStyle_1 === 'function' ? nodeStyle_1(node, graph_1) : nodeStyle_1)\n        };\n      });\n      var getEdgeLabel_1 = function (edge) {\n        var content = (labelCfg_1 !== null && labelCfg_1 !== void 0 ? labelCfg_1 : {}).content;\n        if (['DecompositionTreeGraph', 'OrganizationGraph', 'RadialTreeGraph'].includes(name_1)) {\n          return getCommonCfg(content, edge, graph_1);\n        }\n        if (['FundFlowGraph', 'FlowAnalysisGraph'].includes(name_1)) {\n          var value = edge.value;\n          // @ts-ignore\n          return typeof value === 'object' ? value === null || value === void 0 ? void 0 : value.text : value;\n        }\n        return edge.value;\n      };\n      if (!['fund-line', 'labels-line'].includes(edgeType)) {\n        graph_1.edge(function (edge) {\n          var startArrow = getArrowCfg(startArrowCfg_1, edge);\n          var endArrow = getArrowCfg(endArrowCfg_1, edge);\n          var style = (labelCfg_1 !== null && labelCfg_1 !== void 0 ? labelCfg_1 : {}).style;\n          return {\n            label: getEdgeLabel_1(edge),\n            labelCfg: {\n              style: getCommonCfg(style, edge, graph_1)\n            },\n            style: __assign({\n              stroke: '#ccc',\n              startArrow: startArrow,\n              endArrow: endArrow\n            }, typeof edgeStyle_1 === 'function' ? edgeStyle_1(edge, graph_1) : edgeStyle_1)\n          };\n        });\n      }\n      bindStateEvents(graph_1, config);\n      // 绑定节点辐射事件\n      if (name_1 === 'RadialGraph') {\n        var centerNode = getCenterNode(data);\n        graph_1.set('centerNode', centerNode);\n      }\n      // 绑定事件\n      if (typeof bindEvents === 'function') {\n        bindEvents({\n          graph: graph_1,\n          level: level,\n          asyncData: asyncData,\n          getChildren: getChildren,\n          fetchLoading: fetchLoading,\n          layout: layout_1\n        });\n      }\n      renderGraph(graph_1, data, level);\n      fitCenter_1 && graph_1.fitCenter();\n      onReady && onReady(graph_1);\n      graphData.current = deepClone(data);\n    }\n  }, []);\n  useEffect(function () {\n    if (graphRef.current) {\n      var _graph = graphRef.current;\n      processMinimap(minimapCfg, _graph);\n      processTooltip(tooltipCfg, _graph);\n      processMenu(menuCfg, _graph);\n      processToolbar(toolbarCfg, _graph, container.current);\n    }\n  }, [graphRef, toolbarCfg, tooltipCfg, menuCfg]);\n  useEffect(function () {\n    return function () {\n      if ((graph === null || graph === void 0 ? void 0 : graph.current) && !graph.current.destroyed) {\n        graph.current.destroy();\n      }\n    };\n  }, []);\n  return {\n    container: container\n  };\n}","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","G6","isEqual","isObject","isString","omit","useEffect","useRef","deepClone","getAnchorPoints","getArrowCfg","getCommonCfg","getGraphId","getGraphSize","getMarkerPosition","renderGraph","getCenterNode","bindStateEvents","runAsyncEvent","getRenderData","processMinimap","processTooltip","processMenu","processToolbar","setGlobalInstance","useGraph","graphClass","config","extra","container","graphRef","graphOptions","graphData","data","width","height","layout","minimapCfg","behaviors","fitCenter","nodeCfg","edgeCfg","markerCfg","level","toolbarCfg","tooltipCfg","menuCfg","customLayout","graph","current","setEdgesState","edges","forEach","edge","_a","_b","_c","getModel","source","target","sourceVisible","findById","get","targetVisible","changeVisibility","changeData","originData","tagData","setData","getEdges","updateLayout","updateNodes","nodeType","type","nodeAnchorPoints","anchorPoints","nodeStyle","style","nodeLabelCfg","title","getNodes","node","updateItem","labelCfg","updateEdges","edgeType","edgeStyle","startArrowCfg","startArrow","endArrowCfg","endArrow","label","includes","edgeCfgModel","content","stroke","updateMarker","position","getBBox","markerShape","find","item","attr","getEdgeStateStyles","edgeStateStyles","name","hover","destroyed","nodes","centerNode","set","focusNode","_d","_e","graphSize","changeSize","defaultMode","default","removingBehaviors_1","be","push","removeBehaviors","addBehaviors","name_1","bindEvents","nodeCfg_1","edgeCfg_1","behaviors_1","layout_1","animate","autoFit","fitCenter_1","onReady","customLayout_1","fetchLoading","nodeType_1","nodeAnchorPoints_1","nodeStateStyles","nodeStyle_1","nodeLabelCfg_1","linkCenter","getChildren","asyncData","edgeStyle_1","startArrowCfg_1","endArrowCfg_1","labelCfg_1","graphConfig","modes","defaultNode","defaultEdge","undefined","fitView","extraPlugin","graphId_1","graph_1","customNode_1","getLabel_1","value","text","_draggable","_graphId","getEdgeLabel_1","_graph","destroy"],"sources":["/Users/invotradesign/CascadeProjects/site-users-app/node_modules/@ant-design/graphs/es/hooks/useGraphs.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport G6 from '@antv/g6';\nimport { isEqual, isObject, isString, omit } from '@antv/util';\nimport { useEffect, useRef } from 'react';\nimport { deepClone, getAnchorPoints, getArrowCfg, getCommonCfg, getGraphId, getGraphSize, getMarkerPosition, renderGraph, getCenterNode, bindStateEvents, runAsyncEvent, getRenderData, } from '../utils';\nimport { processMinimap, processTooltip, processMenu, processToolbar } from '../plugins';\nimport { setGlobalInstance } from '../utils/global';\nexport default function useGraph(graphClass, config, extra) {\n    if (extra === void 0) { extra = {}; }\n    var container = useRef(null);\n    var graphRef = useRef();\n    var graphOptions = useRef();\n    // data 单独处理，会被 G6 修改\n    var graphData = useRef();\n    var data = config.data, width = config.width, height = config.height, layout = config.layout, minimapCfg = config.minimapCfg, behaviors = config.behaviors, fitCenter = config.fitCenter, nodeCfg = config.nodeCfg, edgeCfg = config.edgeCfg, markerCfg = config.markerCfg, level = config.level, toolbarCfg = config.toolbarCfg, tooltipCfg = config.tooltipCfg, menuCfg = config.menuCfg, customLayout = config.customLayout;\n    var graph = graphRef.current;\n    /** 隐藏孤立边 */\n    var setEdgesState = function (edges) {\n        edges.forEach(function (edge) {\n            var _a, _b;\n            var _c = edge.getModel(), source = _c.source, target = _c.target;\n            var sourceVisible = (_a = graph === null || graph === void 0 ? void 0 : graph.findById(source)) === null || _a === void 0 ? void 0 : _a.get('visible');\n            var targetVisible = (_b = graph === null || graph === void 0 ? void 0 : graph.findById(target)) === null || _b === void 0 ? void 0 : _b.get('visible');\n            if (sourceVisible === false || targetVisible === false) {\n                edge.changeVisibility(false);\n            }\n        });\n    };\n    var changeData = function () {\n        var _a;\n        var _b;\n        if (!graph)\n            return;\n        var originData = data;\n        var tagData = originData;\n        if (level)\n            _a = getRenderData(data, level), originData = _a[0], tagData = _a[1];\n        graph.changeData(originData);\n        (_b = graph.get('eventData')) === null || _b === void 0 ? void 0 : _b.setData(tagData);\n        setEdgesState(graph.getEdges());\n        if (fitCenter) {\n            graph.fitCenter();\n        }\n        runAsyncEvent(graph.get('id'));\n    };\n    var updateLayout = function () {\n        graph === null || graph === void 0 ? void 0 : graph.updateLayout(layout);\n        if (fitCenter) {\n            graph === null || graph === void 0 ? void 0 : graph.fitCenter();\n        }\n    };\n    var updateNodes = function () {\n        if (!graph) {\n            return;\n        }\n        var _a = nodeCfg !== null && nodeCfg !== void 0 ? nodeCfg : {}, nodeType = _a.type, nodeAnchorPoints = _a.anchorPoints, nodeStyle = _a.style, nodeLabelCfg = _a.title;\n        graph.getNodes().forEach(function (node) {\n            var anchorPoints = getAnchorPoints(nodeAnchorPoints, node.getModel());\n            graph.updateItem(node, {\n                nodeCfg: nodeCfg,\n                markerCfg: markerCfg,\n                type: nodeType,\n                style: nodeStyle,\n                anchorPoints: anchorPoints,\n                labelCfg: nodeLabelCfg,\n            });\n        });\n        runAsyncEvent(graph.get('id'));\n    };\n    var updateEdges = function () {\n        if (!graph) {\n            return;\n        }\n        var _a = edgeCfg !== null && edgeCfg !== void 0 ? edgeCfg : {}, edgeType = _a.type, edgeStyle = _a.style, startArrowCfg = _a.startArrow, endArrowCfg = _a.endArrow, labelCfg = _a.label;\n        graph.getEdges().forEach(function (edge) {\n            // 资金流向图&来源去向图\n            if (['fund-line', 'labels-line'].includes(edgeType)) {\n                graph.updateItem(edge, {\n                    edgeCfg: edgeCfg,\n                });\n            }\n            else {\n                var edgeCfgModel = edge.getModel();\n                var startArrow = getArrowCfg(startArrowCfg, edgeCfgModel);\n                var endArrow = getArrowCfg(endArrowCfg, edgeCfgModel);\n                var _a = labelCfg !== null && labelCfg !== void 0 ? labelCfg : {}, style = _a.style, content = _a.content;\n                graph.updateItem(edge, {\n                    type: edgeType,\n                    label: getCommonCfg(content, edgeCfgModel, graph),\n                    labelCfg: {\n                        style: getCommonCfg(style, edgeCfgModel, graph),\n                    },\n                    style: __assign({ stroke: '#ccc', startArrow: startArrow, endArrow: endArrow }, (typeof edgeStyle === 'function' ? edgeStyle(edgeCfgModel, graph) : edgeStyle)),\n                });\n            }\n        });\n    };\n    // 目前仅支持更新位置\n    var updateMarker = function () {\n        if (!graph) {\n            return;\n        }\n        graph.getNodes().forEach(function (node) {\n            var _a = (typeof markerCfg === 'function' ? markerCfg(node.getModel(), node.get('group')) : markerCfg).position, position = _a === void 0 ? 'right' : _a;\n            var _b = node.getBBox(), width = _b.width, height = _b.height;\n            var markerShape = node\n                .get('group')\n                .get('children')\n                .find(function (item) { return item.get('name') === 'collapse-icon'; });\n            if (markerShape) {\n                markerShape === null || markerShape === void 0 ? void 0 : markerShape.attr(__assign({}, getMarkerPosition(position, [width, height])));\n            }\n        });\n    };\n    var getEdgeStateStyles = function (edgeStateStyles) {\n        var _a = extra.name, name = _a === void 0 ? '' : _a;\n        if (name !== 'FundFlowGraph') {\n            return edgeStateStyles;\n        }\n        if (!edgeStateStyles) {\n            return;\n        }\n        var _b = edgeStateStyles.hover, hover = _b === void 0 ? {} : _b;\n        var endArrow = hover.endArrow, startArrow = hover.startArrow;\n        if (!endArrow && !startArrow) {\n            return edgeStateStyles;\n        }\n        return {\n            hover: __assign(__assign({}, hover), { endArrow: endArrow ? getArrowCfg(endArrow) : false, startArrow: startArrow ? getArrowCfg(startArrow) : false }),\n        };\n    };\n    useEffect(function () {\n        var _a;\n        if (graph && !graph.destroyed) {\n            if (isEqual(data, graphData.current)) {\n                return;\n            }\n            if (extra.name === 'RadialGraph' && !((_a = graphData.current.nodes) === null || _a === void 0 ? void 0 : _a.length)) {\n                var centerNode = getCenterNode(data);\n                graph.set('centerNode', centerNode);\n                graph.updateLayout(__assign(__assign({}, layout), { focusNode: centerNode }));\n            }\n            else {\n                changeData();\n            }\n            graphData.current = deepClone(data);\n        }\n    }, [data]);\n    useEffect(function () {\n        var _a, _b, _c, _d, _e;\n        if (graph && !graph.destroyed) {\n            if (isEqual(config, graphOptions.current)) {\n                return;\n            }\n            if (!customLayout && !isEqual(layout, (_a = graphOptions.current) === null || _a === void 0 ? void 0 : _a.layout)) {\n                updateLayout();\n            }\n            if (!isEqual(minimapCfg, (_b = graphOptions.current) === null || _b === void 0 ? void 0 : _b.minimapCfg)) {\n                processMinimap(minimapCfg, graph);\n            }\n            if (!isEqual(nodeCfg, (_c = graphOptions.current) === null || _c === void 0 ? void 0 : _c.nodeCfg)) {\n                updateNodes();\n            }\n            if (!isEqual(edgeCfg, (_d = graphOptions.current) === null || _d === void 0 ? void 0 : _d.edgeCfg)) {\n                updateEdges();\n            }\n            if (!isEqual(markerCfg, (_e = graphOptions.current) === null || _e === void 0 ? void 0 : _e.markerCfg)) {\n                updateMarker();\n            }\n            graphOptions.current = config;\n        }\n    }, [config]);\n    useEffect(function () {\n        if (graph && !graph.destroyed) {\n            var graphSize = getGraphSize(width, height, container);\n            graph.changeSize(graphSize[0], graphSize[1]);\n        }\n    }, [container, width, height]);\n    useEffect(function () {\n        if (graph && !graph.destroyed) {\n            var defaultMode = graph.get('modes').default;\n            var removingBehaviors_1 = [];\n            defaultMode.forEach(function (be) {\n                if (isObject(be)) {\n                    removingBehaviors_1.push(be.type);\n                }\n                else if (isString(be)) {\n                    removingBehaviors_1.push(be);\n                }\n            });\n            graph.removeBehaviors(removingBehaviors_1, 'default');\n            graph.addBehaviors(behaviors, 'default');\n        }\n    }, [behaviors]);\n    useEffect(function () {\n        if (container.current && graphClass && !graphRef.current) {\n            var _a = extra.name, name_1 = _a === void 0 ? '' : _a, bindEvents = extra.bindEvents;\n            var graphSize = getGraphSize(width, height, container);\n            var nodeCfg_1 = config.nodeCfg, edgeCfg_1 = config.edgeCfg, _b = config.behaviors, behaviors_1 = _b === void 0 ? [] : _b, layout_1 = config.layout, animate = config.animate, autoFit = config.autoFit, fitCenter_1 = config.fitCenter, onReady = config.onReady, customLayout_1 = config.customLayout, fetchLoading = config.fetchLoading;\n            var _c = nodeCfg_1 !== null && nodeCfg_1 !== void 0 ? nodeCfg_1 : {}, nodeType_1 = _c.type, nodeAnchorPoints_1 = _c.anchorPoints, nodeStateStyles = _c.nodeStateStyles, nodeStyle_1 = _c.style, nodeLabelCfg_1 = _c.title, linkCenter = _c.linkCenter, getChildren = _c.getChildren, asyncData = _c.asyncData;\n            var _d = edgeCfg_1 !== null && edgeCfg_1 !== void 0 ? edgeCfg_1 : {}, edgeType = _d.type, edgeStyle_1 = _d.style, startArrowCfg_1 = _d.startArrow, endArrowCfg_1 = _d.endArrow, labelCfg_1 = _d.label, edgeStateStyles = _d.edgeStateStyles;\n            var graphConfig = {\n                container: container.current,\n                width: graphSize[0],\n                height: graphSize[1],\n                animate: animate,\n                linkCenter: linkCenter,\n                modes: {\n                    default: behaviors_1,\n                },\n                defaultNode: __assign(__assign({}, nodeCfg_1), { nodeCfg: nodeCfg_1 }),\n                defaultEdge: __assign(__assign({}, omit(edgeCfg_1, ['label'])), { edgeCfg: edgeCfg_1, labelCfg: labelCfg_1 === null || labelCfg_1 === void 0 ? void 0 : labelCfg_1.style }),\n                nodeStateStyles: nodeStateStyles,\n                edgeStateStyles: getEdgeStateStyles(edgeStateStyles),\n                layout: customLayout_1 ? undefined : layout_1,\n                fitView: autoFit,\n                fitCenter: fitCenter_1,\n                extraPlugin: {\n                    getChildren: getChildren,\n                    fetchLoading: fetchLoading,\n                },\n                markerCfg: markerCfg,\n            };\n            graphRef.current = new G6[graphClass](graphConfig);\n            var graphId_1 = getGraphId(graphRef.current, name_1);\n            var graph_1 = graphRef.current;\n            graph_1.set('id', graphId_1);\n            setGlobalInstance(graphId_1, graph_1);\n            var customNode_1 = ['fund-card', 'indicator-card', 'file-tree-node', 'organization-card'];\n            var getLabel_1 = function (value) {\n                // 辐射树图\n                if (isString(value)) {\n                    return value;\n                }\n                if (name_1 === 'FundFlowGraph') {\n                    return value === null || value === void 0 ? void 0 : value.text;\n                }\n                return value === null || value === void 0 ? void 0 : value.title;\n            };\n            // defaultNode 默认只能绑定 plainObject，针对 Function 类型需要通过该模式绑定\n            graph_1.node(function (node) {\n                if (customNode_1.includes(nodeType_1)) {\n                    var anchorPoints = getAnchorPoints(nodeAnchorPoints_1, node);\n                    node.markerCfg = markerCfg;\n                    node.edgeCfg = edgeCfg_1;\n                    return {\n                        anchorPoints: anchorPoints,\n                        _draggable: behaviors_1.includes('drag-node'),\n                        _graphId: graphId_1,\n                    };\n                }\n                var style = (nodeLabelCfg_1 !== null && nodeLabelCfg_1 !== void 0 ? nodeLabelCfg_1 : {}).style;\n                return {\n                    _graphId: graphId_1,\n                    label: getLabel_1(node.value),\n                    labelCfg: {\n                        style: getCommonCfg(style, node, graph_1),\n                    },\n                    style: __assign({ stroke: '#ccc' }, (typeof nodeStyle_1 === 'function' ? nodeStyle_1(node, graph_1) : nodeStyle_1)),\n                };\n            });\n            var getEdgeLabel_1 = function (edge) {\n                var content = (labelCfg_1 !== null && labelCfg_1 !== void 0 ? labelCfg_1 : {}).content;\n                if (['DecompositionTreeGraph', 'OrganizationGraph', 'RadialTreeGraph'].includes(name_1)) {\n                    return getCommonCfg(content, edge, graph_1);\n                }\n                if (['FundFlowGraph', 'FlowAnalysisGraph'].includes(name_1)) {\n                    var value = edge.value;\n                    // @ts-ignore\n                    return typeof value === 'object' ? value === null || value === void 0 ? void 0 : value.text : value;\n                }\n                return edge.value;\n            };\n            if (!['fund-line', 'labels-line'].includes(edgeType)) {\n                graph_1.edge(function (edge) {\n                    var startArrow = getArrowCfg(startArrowCfg_1, edge);\n                    var endArrow = getArrowCfg(endArrowCfg_1, edge);\n                    var style = (labelCfg_1 !== null && labelCfg_1 !== void 0 ? labelCfg_1 : {}).style;\n                    return {\n                        label: getEdgeLabel_1(edge),\n                        labelCfg: {\n                            style: getCommonCfg(style, edge, graph_1),\n                        },\n                        style: __assign({ stroke: '#ccc', startArrow: startArrow, endArrow: endArrow }, (typeof edgeStyle_1 === 'function' ? edgeStyle_1(edge, graph_1) : edgeStyle_1)),\n                    };\n                });\n            }\n            bindStateEvents(graph_1, config);\n            // 绑定节点辐射事件\n            if (name_1 === 'RadialGraph') {\n                var centerNode = getCenterNode(data);\n                graph_1.set('centerNode', centerNode);\n            }\n            // 绑定事件\n            if (typeof bindEvents === 'function') {\n                bindEvents({\n                    graph: graph_1,\n                    level: level,\n                    asyncData: asyncData,\n                    getChildren: getChildren,\n                    fetchLoading: fetchLoading,\n                    layout: layout_1,\n                });\n            }\n            renderGraph(graph_1, data, level);\n            fitCenter_1 && graph_1.fitCenter();\n            onReady && onReady(graph_1);\n            graphData.current = deepClone(data);\n        }\n    }, []);\n    useEffect(function () {\n        if (graphRef.current) {\n            var _graph = graphRef.current;\n            processMinimap(minimapCfg, _graph);\n            processTooltip(tooltipCfg, _graph);\n            processMenu(menuCfg, _graph);\n            processToolbar(toolbarCfg, _graph, container.current);\n        }\n    }, [graphRef, toolbarCfg, tooltipCfg, menuCfg]);\n    useEffect(function () {\n        return function () {\n            if ((graph === null || graph === void 0 ? void 0 : graph.current) && !graph.current.destroyed) {\n                graph.current.destroy();\n            }\n        };\n    }, []);\n    return {\n        container: container,\n    };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}