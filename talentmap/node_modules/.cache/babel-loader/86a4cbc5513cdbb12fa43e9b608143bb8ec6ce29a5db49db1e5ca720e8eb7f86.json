{"ast":null,"code":"import { setItemStateStyle, getArrowConfig } from '../utils';\nexport default {\n  draw: function (cfg, group, path) {\n    var ratio = cfg.custom.ratio,\n      _a = cfg.style,\n      dashed = _a.dashed,\n      stroke = _a.stroke,\n      _b = _a.endArrow,\n      endArrow = _b === void 0 ? true : _b,\n      _c = _a.sizeMapping,\n      sizeMapping = _c === void 0 ? true : _c;\n    var borderWidth = 0;\n    // 如果开启了大小映射，则根据比率映射边框宽度\n    if (sizeMapping) {\n      borderWidth = !isNaN(ratio) && ratio !== Infinity ? Math.max(2, Math.min(72, 72 * ratio)) : 2;\n    }\n    // 添加边框\n    var keyShape = group === null || group === void 0 ? void 0 : group.addShape('path', {\n      attrs: {\n        stroke: stroke,\n        opacity: 0.2,\n        path: path,\n        lineWidth: borderWidth\n      },\n      name: 'path-border-shape'\n    });\n    // 路径主线\n    group === null || group === void 0 ? void 0 : group.addShape('path', {\n      attrs: {\n        stroke: stroke,\n        path: path,\n        endArrow: endArrow ? getArrowConfig(stroke) : null,\n        lineDash: dashed ? [3, 3] : []\n      },\n      name: 'path-shape'\n    });\n    return keyShape;\n  },\n  afterDraw: function (cfg, group) {\n    var label = cfg.label,\n      labelFill = cfg.style.labelFill;\n    var shape = group === null || group === void 0 ? void 0 : group.get('children')[0];\n    // 获取路径图形的中点坐标\n    var midPoint = shape.getPoint(0.5);\n    if (label) {\n      // 绘制label\n      var labelShape = group === null || group === void 0 ? void 0 : group.addShape('text', {\n        attrs: {\n          text: label,\n          x: midPoint.x,\n          y: midPoint.y,\n          fill: labelFill,\n          opacity: 0.85,\n          fontFamily: 'Roboto-Regular',\n          fontSize: 12,\n          textAlign: 'center',\n          textBaseline: 'middle'\n        },\n        name: 'label-shape'\n      });\n      var labelBbox = labelShape === null || labelShape === void 0 ? void 0 : labelShape.getBBox();\n      var padding = 5; // 四周的留白\n      // 绘制label背景框\n      group === null || group === void 0 ? void 0 : group.addShape('rect', {\n        attrs: {\n          width: labelBbox.width + padding * 2,\n          height: labelBbox.height + padding * 2,\n          x: midPoint.x - labelBbox.width / 2 - padding,\n          y: midPoint.y - labelBbox.height / 2 - padding,\n          fill: '#fff'\n        },\n        name: 'label-bg-shape',\n        labelRelated: true\n      });\n      // 边名称labelShape上移一个层级\n      if (labelShape) {\n        labelShape.toFront();\n      }\n    }\n  },\n  setState: function (name, value, edge) {\n    // 设置状态样式\n    setItemStateStyle(edge, 'edge');\n  }\n};","map":{"version":3,"names":["setItemStateStyle","getArrowConfig","draw","cfg","group","path","ratio","custom","_a","style","dashed","stroke","_b","endArrow","_c","sizeMapping","borderWidth","isNaN","Infinity","Math","max","min","keyShape","addShape","attrs","opacity","lineWidth","name","lineDash","afterDraw","label","labelFill","shape","get","midPoint","getPoint","labelShape","text","x","y","fill","fontFamily","fontSize","textAlign","textBaseline","labelBbox","getBBox","padding","width","height","labelRelated","toFront","setState","value","edge"],"sources":["/Users/invotradesign/CascadeProjects/site-users-app/node_modules/@ant-design/graphs/es/components/conversion-dagre-graph/edges/baseEdge.js"],"sourcesContent":["import { setItemStateStyle, getArrowConfig } from '../utils';\nexport default {\n    draw: function (cfg, group, path) {\n        var ratio = cfg.custom.ratio, _a = cfg.style, dashed = _a.dashed, stroke = _a.stroke, _b = _a.endArrow, endArrow = _b === void 0 ? true : _b, _c = _a.sizeMapping, sizeMapping = _c === void 0 ? true : _c;\n        var borderWidth = 0;\n        // 如果开启了大小映射，则根据比率映射边框宽度\n        if (sizeMapping) {\n            borderWidth = !isNaN(ratio) && ratio !== Infinity ? Math.max(2, Math.min(72, 72 * ratio)) : 2;\n        }\n        // 添加边框\n        var keyShape = group === null || group === void 0 ? void 0 : group.addShape('path', {\n            attrs: {\n                stroke: stroke,\n                opacity: 0.2,\n                path: path,\n                lineWidth: borderWidth,\n            },\n            name: 'path-border-shape',\n        });\n        // 路径主线\n        group === null || group === void 0 ? void 0 : group.addShape('path', {\n            attrs: {\n                stroke: stroke,\n                path: path,\n                endArrow: endArrow ? getArrowConfig(stroke) : null,\n                lineDash: dashed ? [3, 3] : [],\n            },\n            name: 'path-shape',\n        });\n        return keyShape;\n    },\n    afterDraw: function (cfg, group) {\n        var label = cfg.label, labelFill = cfg.style.labelFill;\n        var shape = group === null || group === void 0 ? void 0 : group.get('children')[0];\n        // 获取路径图形的中点坐标\n        var midPoint = shape.getPoint(0.5);\n        if (label) {\n            // 绘制label\n            var labelShape = group === null || group === void 0 ? void 0 : group.addShape('text', {\n                attrs: {\n                    text: label,\n                    x: midPoint.x,\n                    y: midPoint.y,\n                    fill: labelFill,\n                    opacity: 0.85,\n                    fontFamily: 'Roboto-Regular',\n                    fontSize: 12,\n                    textAlign: 'center',\n                    textBaseline: 'middle',\n                },\n                name: 'label-shape',\n            });\n            var labelBbox = labelShape === null || labelShape === void 0 ? void 0 : labelShape.getBBox();\n            var padding = 5; // 四周的留白\n            // 绘制label背景框\n            group === null || group === void 0 ? void 0 : group.addShape('rect', {\n                attrs: {\n                    width: labelBbox.width + padding * 2,\n                    height: labelBbox.height + padding * 2,\n                    x: midPoint.x - labelBbox.width / 2 - padding,\n                    y: midPoint.y - labelBbox.height / 2 - padding,\n                    fill: '#fff',\n                },\n                name: 'label-bg-shape',\n                labelRelated: true,\n            });\n            // 边名称labelShape上移一个层级\n            if (labelShape) {\n                labelShape.toFront();\n            }\n        }\n    },\n    setState: function (name, value, edge) {\n        // 设置状态样式\n        setItemStateStyle(edge, 'edge');\n    },\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}