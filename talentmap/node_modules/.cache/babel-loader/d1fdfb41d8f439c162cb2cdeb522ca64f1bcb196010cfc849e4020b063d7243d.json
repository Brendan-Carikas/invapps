{"ast":null,"code":"var _jsxFileName = \"/Users/invotradesign/MYGitHub/CascadeProjects/site-users-app/src/components/OrgChart.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport Tree from 'react-d3-tree';\nimport { useUsers } from './UserContext';\nimport { Box, Card, Avatar, Typography, useTheme as useMuiTheme, alpha } from '@mui/material';\nimport { useTheme } from './ThemeContext';\n\n// Convert NodeAttributes to Record<string, string | number | boolean>\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst stringToColor = string => {\n  let hash = 0;\n  for (let i = 0; i < string.length; i++) {\n    hash = string.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let color = '#';\n  for (let i = 0; i < 3; i++) {\n    const value = hash >> i * 8 & 0xFF;\n    color += ('00' + value.toString(16)).substr(-2);\n  }\n  return color;\n};\nconst convertToRawNodeDatum = node => {\n  var _node$children;\n  return {\n    name: node.name,\n    attributes: node.attributes,\n    children: (_node$children = node.children) === null || _node$children === void 0 ? void 0 : _node$children.map(convertToRawNodeDatum)\n  };\n};\nconst OrgChart = () => {\n  _s();\n  const muiTheme = useMuiTheme();\n  const {\n    headingFontWeights,\n    pageTitleFontSize,\n    headingFont\n  } = useTheme();\n  const {\n    users\n  } = useUsers();\n  const [treeData, setTreeData] = useState(null);\n  const [dimensions, setDimensions] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n  const [expandedNodes, setExpandedNodes] = useState(new Set());\n\n  // Update dimensions on window resize\n  useEffect(() => {\n    const handleResize = () => {\n      setDimensions({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    };\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n  useEffect(() => {\n    const buildTreeData = users => {\n      var _data$children;\n      if (!users.length) return null;\n      const userMap = new Map(users.map(user => [user.id, user]));\n      const root = users.find(user => {\n        var _user$directReports;\n        const hasValidManager = user.managerId && userMap.has(user.managerId);\n        return !hasValidManager && (user.jobRole.toLowerCase().includes('ceo') || user.jobRole.toLowerCase().includes('chief') || ((_user$directReports = user.directReports) === null || _user$directReports === void 0 ? void 0 : _user$directReports.length));\n      }) || users[0];\n      const buildNode = user => {\n        const directReportIds = new Set();\n        if (user.directReports) {\n          user.directReports.forEach(id => directReportIds.add(id));\n        }\n        users.forEach(u => {\n          if (u.managerId === user.id) {\n            directReportIds.add(u.id);\n          }\n        });\n        const children = Array.from(directReportIds).map(id => userMap.get(id)).filter(u => u !== undefined).map(child => buildNode(child));\n        return {\n          name: user.name,\n          id: user.id.toString(),\n          attributes: {\n            name: user.name,\n            role: user.jobRole,\n            team: user.team,\n            location: user.location,\n            email: user.email\n          },\n          children: children.length > 0 ? children : undefined\n        };\n      };\n      const data = buildNode(root);\n      setExpandedNodes(new Set([data.id, ...(((_data$children = data.children) === null || _data$children === void 0 ? void 0 : _data$children.map(c => c.id)) || [])]));\n      return data;\n    };\n    const data = buildTreeData(users);\n    setTreeData(data);\n  }, [users]);\n  const toggleNode = nodeId => {\n    setExpandedNodes(prev => {\n      const next = new Set(prev);\n      if (next.has(nodeId)) {\n        next.delete(nodeId);\n      } else {\n        next.add(nodeId);\n      }\n      return next;\n    });\n  };\n  const processTreeData = node => {\n    var _node$children2;\n    return {\n      name: node.name,\n      attributes: {\n        ...node.attributes,\n        id: node.id,\n        hasChildren: node.children && node.children.length > 0\n      },\n      children: expandedNodes.has(node.id) ? (_node$children2 = node.children) === null || _node$children2 === void 0 ? void 0 : _node$children2.map(processTreeData) : undefined\n    };\n  };\n  const renderCustomNode = ({\n    nodeDatum\n  }) => {\n    const attrs = nodeDatum.attributes;\n    const isMobile = dimensions.width < 600;\n    if (!attrs) return null;\n    const initials = attrs.name.split(' ').map(n => n[0]).join('');\n    const bgColor = stringToColor(attrs.name);\n    const hasChildren = attrs.hasChildren;\n    const isExpanded = expandedNodes.has(attrs.id);\n    return /*#__PURE__*/_jsxDEV(\"g\", {\n      children: /*#__PURE__*/_jsxDEV(\"foreignObject\", {\n        x: isMobile ? -75 : -100,\n        y: isMobile ? -40 : -50,\n        width: isMobile ? 150 : 200,\n        height: isMobile ? 80 : 100,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            p: isMobile ? 1 : 1.5,\n            width: '100%',\n            height: '100%',\n            bgcolor: alpha(muiTheme.palette.background.paper, 0.9),\n            boxShadow: 3,\n            borderRadius: 2,\n            overflow: 'visible',\n            position: 'relative',\n            cursor: hasChildren ? 'pointer' : 'default',\n            '&:hover': hasChildren ? {\n              bgcolor: alpha(muiTheme.palette.background.paper, 0.95)\n            } : {}\n          },\n          onClick: () => hasChildren && toggleNode(attrs.id),\n          children: [hasChildren && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              position: 'absolute',\n              right: 4,\n              top: 4,\n              width: 20,\n              height: 20,\n              borderRadius: '50%',\n              bgcolor: alpha(muiTheme.palette.primary.main, 0.1),\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              fontSize: '1rem',\n              color: 'primary.main'\n            },\n            children: isExpanded ? '−' : '+'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: isMobile ? 1 : 1.5\n            },\n            children: [/*#__PURE__*/_jsxDEV(Avatar, {\n              sx: {\n                width: isMobile ? 35 : 45,\n                height: isMobile ? 35 : 45,\n                bgcolor: bgColor,\n                fontSize: isMobile ? '0.9rem' : '1.1rem',\n                fontWeight: 600\n              },\n              children: initials\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                minWidth: 0,\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: isMobile ? \"body2\" : \"subtitle1\",\n                sx: {\n                  fontWeight: 600,\n                  whiteSpace: 'nowrap',\n                  overflow: 'hidden',\n                  textOverflow: 'ellipsis',\n                  fontSize: isMobile ? '0.8rem' : 'inherit',\n                  pr: hasChildren ? 3 : 0\n                },\n                children: attrs.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                color: \"textSecondary\",\n                sx: {\n                  display: 'block',\n                  whiteSpace: 'nowrap',\n                  overflow: 'hidden',\n                  textOverflow: 'ellipsis',\n                  fontSize: isMobile ? '0.7rem' : 'inherit'\n                },\n                children: attrs.role\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                color: \"primary\",\n                sx: {\n                  display: 'block',\n                  whiteSpace: 'nowrap',\n                  overflow: 'hidden',\n                  textOverflow: 'ellipsis',\n                  fontSize: isMobile ? '0.7rem' : 'inherit'\n                },\n                children: attrs.team\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this);\n  };\n  if (!treeData) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 3\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        children: \"Loading organization chart...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      height: '100vh',\n      p: 3\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      component: \"h1\",\n      sx: {\n        mb: 3,\n        fontWeight: (headingFontWeights === null || headingFontWeights === void 0 ? void 0 : headingFontWeights.pageTitle) || 700,\n        fontSize: pageTitleFontSize,\n        fontFamily: headingFont\n      },\n      children: \"Organization Chart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        width: '100%',\n        height: 'calc(100vh - 64px)',\n        overflow: 'hidden',\n        touchAction: 'none' // Prevents default touch behaviors\n      },\n      children: /*#__PURE__*/_jsxDEV(Tree, {\n        data: treeData ? processTreeData(treeData) : {\n          name: 'No Data'\n        },\n        renderCustomNodeElement: renderCustomNode,\n        orientation: \"vertical\",\n        pathFunc: \"step\",\n        translate: {\n          x: dimensions.width / 2,\n          y: Math.min(100, dimensions.height * 0.1)\n        },\n        separation: {\n          siblings: 2,\n          nonSiblings: 2\n        },\n        zoom: 0.6,\n        nodeSize: {\n          x: 300,\n          y: 150\n        },\n        enableLegacyTransitions: true,\n        transitionDuration: 800,\n        scaleExtent: {\n          min: 0.1,\n          max: 2\n        },\n        hasInteractiveNodes: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 285,\n    columnNumber: 5\n  }, this);\n};\n_s(OrgChart, \"HmFgRLJF0CjqMSd6y1G8S3i41p8=\", false, function () {\n  return [useMuiTheme, useTheme, useUsers];\n});\n_c = OrgChart;\nexport default OrgChart;\nvar _c;\n$RefreshReg$(_c, \"OrgChart\");","map":{"version":3,"names":["React","useEffect","useState","Tree","useUsers","Box","Card","Avatar","Typography","useTheme","useMuiTheme","alpha","jsxDEV","_jsxDEV","stringToColor","string","hash","i","length","charCodeAt","color","value","toString","substr","convertToRawNodeDatum","node","_node$children","name","attributes","children","map","OrgChart","_s","muiTheme","headingFontWeights","pageTitleFontSize","headingFont","users","treeData","setTreeData","dimensions","setDimensions","width","window","innerWidth","height","innerHeight","expandedNodes","setExpandedNodes","Set","handleResize","addEventListener","removeEventListener","buildTreeData","_data$children","userMap","Map","user","id","root","find","_user$directReports","hasValidManager","managerId","has","jobRole","toLowerCase","includes","directReports","buildNode","directReportIds","forEach","add","u","Array","from","get","filter","undefined","child","role","team","location","email","data","c","toggleNode","nodeId","prev","next","delete","processTreeData","_node$children2","hasChildren","renderCustomNode","nodeDatum","attrs","isMobile","initials","split","n","join","bgColor","isExpanded","x","y","sx","p","bgcolor","palette","background","paper","boxShadow","borderRadius","overflow","position","cursor","onClick","right","top","primary","main","display","alignItems","justifyContent","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","gap","fontWeight","minWidth","flex","variant","whiteSpace","textOverflow","pr","component","mb","pageTitle","fontFamily","touchAction","renderCustomNodeElement","orientation","pathFunc","translate","Math","min","separation","siblings","nonSiblings","zoom","nodeSize","enableLegacyTransitions","transitionDuration","scaleExtent","max","hasInteractiveNodes","_c","$RefreshReg$"],"sources":["/Users/invotradesign/MYGitHub/CascadeProjects/site-users-app/src/components/OrgChart.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Tree, { RawNodeDatum, CustomNodeElementProps } from 'react-d3-tree';\nimport { User } from '../types/User';\nimport { useUsers } from './UserContext';\nimport {\n  Box,\n  Card,\n  Avatar,\n  Typography,\n  useTheme as useMuiTheme,\n  alpha\n} from '@mui/material';\nimport { useTheme } from './ThemeContext';\n\ntype NodeAttributes = {\n  name: string;\n  role: string;\n  team: string;\n  location: string;\n  email: string;\n}\n\n// Convert NodeAttributes to Record<string, string | number | boolean>\ntype TreeNodeAttributes = Record<keyof NodeAttributes, string>;\n\ninterface OrgChartNodeData {\n  name: string;\n  attributes?: TreeNodeAttributes;\n  children?: OrgChartNodeData[];\n  id: string;\n}\n\nconst stringToColor = (string: string) => {\n  let hash = 0;\n  for (let i = 0; i < string.length; i++) {\n    hash = string.charCodeAt(i) + ((hash << 5) - hash);\n  }\n  let color = '#';\n  for (let i = 0; i < 3; i++) {\n    const value = (hash >> (i * 8)) & 0xFF;\n    color += ('00' + value.toString(16)).substr(-2);\n  }\n  return color;\n};\n\nconst convertToRawNodeDatum = (node: OrgChartNodeData): RawNodeDatum => {\n  return {\n    name: node.name,\n    attributes: node.attributes,\n    children: node.children?.map(convertToRawNodeDatum)\n  };\n};\n\nconst OrgChart: React.FC = () => {\n  const muiTheme = useMuiTheme();\n  const { headingFontWeights, pageTitleFontSize, headingFont } = useTheme();\n  const { users } = useUsers();\n  const [treeData, setTreeData] = useState<OrgChartNodeData | null>(null);\n  const [dimensions, setDimensions] = useState({ \n    width: window.innerWidth, \n    height: window.innerHeight \n  });\n  const [expandedNodes, setExpandedNodes] = useState<Set<string>>(new Set());\n\n  // Update dimensions on window resize\n  useEffect(() => {\n    const handleResize = () => {\n      setDimensions({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  useEffect(() => {\n    const buildTreeData = (users: User[]): OrgChartNodeData | null => {\n      if (!users.length) return null;\n\n      const userMap = new Map(users.map(user => [user.id, user]));\n      \n      const root = users.find(user => {\n        const hasValidManager = user.managerId && userMap.has(user.managerId);\n        return !hasValidManager && (\n          user.jobRole.toLowerCase().includes('ceo') || \n          user.jobRole.toLowerCase().includes('chief') ||\n          user.directReports?.length\n        );\n      }) || users[0];\n\n      const buildNode = (user: User): OrgChartNodeData => {\n        const directReportIds = new Set<number>();\n        \n        if (user.directReports) {\n          user.directReports.forEach(id => directReportIds.add(id));\n        }\n        \n        users.forEach(u => {\n          if (u.managerId === user.id) {\n            directReportIds.add(u.id);\n          }\n        });\n\n        const children = Array.from(directReportIds)\n          .map(id => userMap.get(id))\n          .filter((u): u is User => u !== undefined)\n          .map(child => buildNode(child));\n\n        return {\n          name: user.name,\n          id: user.id.toString(),\n          attributes: {\n            name: user.name,\n            role: user.jobRole,\n            team: user.team,\n            location: user.location,\n            email: user.email\n          },\n          children: children.length > 0 ? children : undefined\n        };\n      };\n\n      const data = buildNode(root);\n      setExpandedNodes(new Set([data.id, ...(data.children?.map(c => c.id) || [])]));\n      return data;\n    };\n\n    const data = buildTreeData(users);\n    setTreeData(data);\n  }, [users]);\n\n  const toggleNode = (nodeId: string) => {\n    setExpandedNodes(prev => {\n      const next = new Set(prev);\n      if (next.has(nodeId)) {\n        next.delete(nodeId);\n      } else {\n        next.add(nodeId);\n      }\n      return next;\n    });\n  };\n\n  const processTreeData = (node: OrgChartNodeData): RawNodeDatum => {\n    return {\n      name: node.name,\n      attributes: {\n        ...node.attributes,\n        id: node.id,\n        hasChildren: node.children && node.children.length > 0\n      },\n      children: expandedNodes.has(node.id) \n        ? node.children?.map(processTreeData)\n        : undefined\n    };\n  };\n\n  const renderCustomNode = ({ nodeDatum }: CustomNodeElementProps) => {\n    const attrs = nodeDatum.attributes as (Record<string, string> & { id: string, hasChildren: boolean }) | undefined;\n    const isMobile = dimensions.width < 600;\n    \n    if (!attrs) return null;\n\n    const initials = attrs.name.split(' ').map(n => n[0]).join('');\n    const bgColor = stringToColor(attrs.name);\n    const hasChildren = attrs.hasChildren;\n    const isExpanded = expandedNodes.has(attrs.id);\n\n    return (\n      <g>\n        <foreignObject \n          x={isMobile ? -75 : -100} \n          y={isMobile ? -40 : -50} \n          width={isMobile ? 150 : 200} \n          height={isMobile ? 80 : 100}\n        >\n          <Card\n            sx={{\n              p: isMobile ? 1 : 1.5,\n              width: '100%',\n              height: '100%',\n              bgcolor: alpha(muiTheme.palette.background.paper, 0.9),\n              boxShadow: 3,\n              borderRadius: 2,\n              overflow: 'visible',\n              position: 'relative',\n              cursor: hasChildren ? 'pointer' : 'default',\n              '&:hover': hasChildren ? {\n                bgcolor: alpha(muiTheme.palette.background.paper, 0.95),\n              } : {}\n            }}\n            onClick={() => hasChildren && toggleNode(attrs.id)}\n          >\n            {hasChildren && (\n              <Box\n                sx={{\n                  position: 'absolute',\n                  right: 4,\n                  top: 4,\n                  width: 20,\n                  height: 20,\n                  borderRadius: '50%',\n                  bgcolor: alpha(muiTheme.palette.primary.main, 0.1),\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontSize: '1rem',\n                  color: 'primary.main'\n                }}\n              >\n                {isExpanded ? '−' : '+'}\n              </Box>\n            )}\n            <Box sx={{ display: 'flex', alignItems: 'center', gap: isMobile ? 1 : 1.5 }}>\n              <Avatar\n                sx={{\n                  width: isMobile ? 35 : 45,\n                  height: isMobile ? 35 : 45,\n                  bgcolor: bgColor,\n                  fontSize: isMobile ? '0.9rem' : '1.1rem',\n                  fontWeight: 600\n                }}\n              >\n                {initials}\n              </Avatar>\n              <Box sx={{ minWidth: 0, flex: 1 }}>\n                <Typography \n                  variant={isMobile ? \"body2\" : \"subtitle1\"}\n                  sx={{ \n                    fontWeight: 600,\n                    whiteSpace: 'nowrap',\n                    overflow: 'hidden',\n                    textOverflow: 'ellipsis',\n                    fontSize: isMobile ? '0.8rem' : 'inherit',\n                    pr: hasChildren ? 3 : 0\n                  }}\n                >\n                  {attrs.name}\n                </Typography>\n                <Typography \n                  variant=\"caption\" \n                  color=\"textSecondary\"\n                  sx={{\n                    display: 'block',\n                    whiteSpace: 'nowrap',\n                    overflow: 'hidden',\n                    textOverflow: 'ellipsis',\n                    fontSize: isMobile ? '0.7rem' : 'inherit'\n                  }}\n                >\n                  {attrs.role}\n                </Typography>\n                <Typography \n                  variant=\"caption\" \n                  color=\"primary\"\n                  sx={{\n                    display: 'block',\n                    whiteSpace: 'nowrap',\n                    overflow: 'hidden',\n                    textOverflow: 'ellipsis',\n                    fontSize: isMobile ? '0.7rem' : 'inherit'\n                  }}\n                >\n                  {attrs.team}\n                </Typography>\n              </Box>\n            </Box>\n          </Card>\n        </foreignObject>\n      </g>\n    );\n  };\n\n  if (!treeData) {\n    return (\n      <Box sx={{ p: 3 }}>\n        <Typography>Loading organization chart...</Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{ height: '100vh', p: 3 }}>\n      <Typography \n        component=\"h1\" \n        sx={{ \n          mb: 3,\n          fontWeight: headingFontWeights?.pageTitle || 700,\n          fontSize: pageTitleFontSize,\n          fontFamily: headingFont\n        }}\n      >\n        Organization Chart\n      </Typography>\n      <Box sx={{ \n        width: '100%', \n        height: 'calc(100vh - 64px)',\n        overflow: 'hidden',\n        touchAction: 'none' // Prevents default touch behaviors\n      }}>\n        <Tree\n          data={treeData ? processTreeData(treeData) : { name: 'No Data' }}\n          renderCustomNodeElement={renderCustomNode}\n          orientation=\"vertical\"\n          pathFunc=\"step\"\n          translate={{ \n            x: dimensions.width / 2, \n            y: Math.min(100, dimensions.height * 0.1) \n          }}\n          separation={{ \n            siblings: 2, \n            nonSiblings: 2 \n          }}\n          zoom={0.6}\n          nodeSize={{ \n            x: 300, \n            y: 150 \n          }}\n          enableLegacyTransitions={true}\n          transitionDuration={800}\n          scaleExtent={{ min: 0.1, max: 2 }}\n          hasInteractiveNodes={true}\n        />\n      </Box>\n    </Box>\n  );\n};\n\nexport default OrgChart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}