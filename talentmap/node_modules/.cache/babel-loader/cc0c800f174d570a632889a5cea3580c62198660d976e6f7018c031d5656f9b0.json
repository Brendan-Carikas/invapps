{"ast":null,"code":"import G6 from '@antv/g6';\nimport { setItemStateStyle } from '../utils';\nexport var registerConvNode = function () {\n  // 自定义转化节点\n  G6.registerNode('conv-node', {\n    options: {},\n    draw: function (cfg, group) {\n      var _a = cfg.custom,\n        custom = _a === void 0 ? {} : _a,\n        _b = cfg.style,\n        stroke = _b.stroke,\n        textColor = _b.textColor,\n        _c = cfg.size,\n        size = _c === void 0 ? 150 : _c;\n      var label = cfg.label;\n      var _d = custom.measure,\n        measure = _d === void 0 ? {} : _d,\n        _e = custom.relatedMeasures,\n        relatedMeasures = _e === void 0 ? [] : _e;\n      var showFormattedValue = measure.formattedValue !== undefined && measure.formattedValue !== null;\n      // 最外层描边（光晕）\n      var keyShape = group.addShape('rect', {\n        attrs: {\n          x: 0,\n          y: 0,\n          width: size,\n          height: 122,\n          lineWidth: 0,\n          stroke: stroke,\n          opacity: 0.3,\n          radius: 4\n        },\n        name: 'node-key-shape',\n        draggable: true\n      });\n      var keyShapeBbox = keyShape.getBBox();\n      group.addShape('rect', {\n        attrs: {\n          x: 0,\n          y: 0,\n          width: keyShapeBbox.width,\n          height: keyShapeBbox.height,\n          stroke: stroke,\n          fill: '#fff',\n          radius: 4\n        },\n        name: 'node-inner-border-shape',\n        draggable: true\n      });\n      group.addShape('rect', {\n        attrs: {\n          x: 0,\n          y: 0,\n          width: 4,\n          height: keyShapeBbox.height,\n          fill: stroke,\n          radius: [4, 0, 0, 4]\n        },\n        name: 'node-left-border-shape',\n        draggable: true\n      });\n      var showNameMore = label.length > 10;\n      // 节点名称\n      group === null || group === void 0 ? void 0 : group.addShape('text', {\n        attrs: {\n          text: showNameMore ? \"\".concat(label.slice(0, 11), \"...\") : label,\n          x: 12,\n          y: 12,\n          fontFamily: 'PingFangSC',\n          fontSize: 12,\n          fontWeight: 600,\n          lineHeight: 17,\n          textBaseline: 'top',\n          fill: textColor,\n          opacity: 0.85\n        },\n        name: 'node-name'\n      });\n      // 主指标名称\n      group === null || group === void 0 ? void 0 : group.addShape('text', {\n        attrs: {\n          text: measure.name || '',\n          x: 12,\n          y: 37,\n          fontFamily: 'PingFangSC',\n          fontSize: 12,\n          fontWeight: 600,\n          lineHeight: 17,\n          textBaseline: 'top',\n          fill: textColor,\n          opacity: 0.85\n        },\n        name: 'node-measure-name',\n        draggable: true\n      });\n      // 主指标值\n      var measureShape = group === null || group === void 0 ? void 0 : group.addShape('text', {\n        attrs: {\n          text: (showFormattedValue ? measure.formattedValue : measure.value) || '',\n          x: 12,\n          y: 58,\n          fontFamily: 'Roboto-Medium',\n          fontSize: 20,\n          fontWeight: 600,\n          lineHeight: 28,\n          textBaseline: 'top',\n          fill: textColor,\n          opacity: 0.85\n        },\n        name: 'node-measure-value',\n        draggable: true\n      });\n      if (showFormattedValue) {\n        var measureShapeBbox = measureShape.getBBox();\n        // 主指标单位\n        group === null || group === void 0 ? void 0 : group.addShape('text', {\n          attrs: {\n            text: measure.formattedUnit || '',\n            x: 12 + measureShapeBbox.width + 4,\n            y: 56,\n            fontFamily: 'PingFangSC',\n            fontSize: 20,\n            fontWeight: 500,\n            lineHeight: 28,\n            textBaseline: 'top',\n            fill: textColor,\n            opacity: 0.85\n          },\n          name: 'node-measure-unit',\n          draggable: true\n        });\n      }\n      // 相关指标信息\n      relatedMeasures.forEach(function (relatedMeasure, index) {\n        var showFormattedValue = relatedMeasure.formattedValue !== undefined;\n        var relatedMeasureText = \"\".concat(relatedMeasure.name, \" \").concat(showFormattedValue ? relatedMeasure.formattedValue : relatedMeasure.value).concat(showFormattedValue && relatedMeasure.formattedUnit);\n        group === null || group === void 0 ? void 0 : group.addShape('text', {\n          attrs: {\n            text: relatedMeasureText,\n            x: 12,\n            y: 95,\n            fontFamily: 'PingFangSC',\n            fontSize: 12,\n            fontWeight: 400,\n            lineHeight: 17,\n            textBaseline: 'top',\n            fill: textColor,\n            opacity: 0.45\n          },\n          name: \"node-releted-measure-\".concat(index),\n          draggable: true\n        });\n      });\n      return keyShape;\n    },\n    setState: function (name, value, node) {\n      // 设置状态样式\n      setItemStateStyle(node, 'node');\n    }\n  });\n};","map":{"version":3,"names":["G6","setItemStateStyle","registerConvNode","registerNode","options","draw","cfg","group","_a","custom","_b","style","stroke","textColor","_c","size","label","_d","measure","_e","relatedMeasures","showFormattedValue","formattedValue","undefined","keyShape","addShape","attrs","x","y","width","height","lineWidth","opacity","radius","name","draggable","keyShapeBbox","getBBox","fill","showNameMore","length","text","concat","slice","fontFamily","fontSize","fontWeight","lineHeight","textBaseline","measureShape","value","measureShapeBbox","formattedUnit","forEach","relatedMeasure","index","relatedMeasureText","setState","node"],"sources":["/Users/invotradesign/CascadeProjects/site-users-app/node_modules/@ant-design/graphs/es/components/conversion-dagre-graph/nodes/convNode.js"],"sourcesContent":["import G6 from '@antv/g6';\nimport { setItemStateStyle } from '../utils';\nexport var registerConvNode = function () {\n    // 自定义转化节点\n    G6.registerNode('conv-node', {\n        options: {},\n        draw: function (cfg, group) {\n            var _a = cfg.custom, custom = _a === void 0 ? {} : _a, _b = cfg.style, stroke = _b.stroke, textColor = _b.textColor, _c = cfg.size, size = _c === void 0 ? 150 : _c;\n            var label = cfg.label;\n            var _d = custom.measure, measure = _d === void 0 ? {} : _d, _e = custom.relatedMeasures, relatedMeasures = _e === void 0 ? [] : _e;\n            var showFormattedValue = measure.formattedValue !== undefined && measure.formattedValue !== null;\n            // 最外层描边（光晕）\n            var keyShape = group.addShape('rect', {\n                attrs: {\n                    x: 0,\n                    y: 0,\n                    width: size,\n                    height: 122,\n                    lineWidth: 0,\n                    stroke: stroke,\n                    opacity: 0.3,\n                    radius: 4,\n                },\n                name: 'node-key-shape',\n                draggable: true,\n            });\n            var keyShapeBbox = keyShape.getBBox();\n            group.addShape('rect', {\n                attrs: {\n                    x: 0,\n                    y: 0,\n                    width: keyShapeBbox.width,\n                    height: keyShapeBbox.height,\n                    stroke: stroke,\n                    fill: '#fff',\n                    radius: 4,\n                },\n                name: 'node-inner-border-shape',\n                draggable: true,\n            });\n            group.addShape('rect', {\n                attrs: {\n                    x: 0,\n                    y: 0,\n                    width: 4,\n                    height: keyShapeBbox.height,\n                    fill: stroke,\n                    radius: [4, 0, 0, 4],\n                },\n                name: 'node-left-border-shape',\n                draggable: true,\n            });\n            var showNameMore = label.length > 10;\n            // 节点名称\n            group === null || group === void 0 ? void 0 : group.addShape('text', {\n                attrs: {\n                    text: showNameMore ? \"\".concat(label.slice(0, 11), \"...\") : label,\n                    x: 12,\n                    y: 12,\n                    fontFamily: 'PingFangSC',\n                    fontSize: 12,\n                    fontWeight: 600,\n                    lineHeight: 17,\n                    textBaseline: 'top',\n                    fill: textColor,\n                    opacity: 0.85,\n                },\n                name: 'node-name',\n            });\n            // 主指标名称\n            group === null || group === void 0 ? void 0 : group.addShape('text', {\n                attrs: {\n                    text: measure.name || '',\n                    x: 12,\n                    y: 37,\n                    fontFamily: 'PingFangSC',\n                    fontSize: 12,\n                    fontWeight: 600,\n                    lineHeight: 17,\n                    textBaseline: 'top',\n                    fill: textColor,\n                    opacity: 0.85,\n                },\n                name: 'node-measure-name',\n                draggable: true,\n            });\n            // 主指标值\n            var measureShape = group === null || group === void 0 ? void 0 : group.addShape('text', {\n                attrs: {\n                    text: (showFormattedValue ? measure.formattedValue : measure.value) || '',\n                    x: 12,\n                    y: 58,\n                    fontFamily: 'Roboto-Medium',\n                    fontSize: 20,\n                    fontWeight: 600,\n                    lineHeight: 28,\n                    textBaseline: 'top',\n                    fill: textColor,\n                    opacity: 0.85,\n                },\n                name: 'node-measure-value',\n                draggable: true,\n            });\n            if (showFormattedValue) {\n                var measureShapeBbox = measureShape.getBBox();\n                // 主指标单位\n                group === null || group === void 0 ? void 0 : group.addShape('text', {\n                    attrs: {\n                        text: measure.formattedUnit || '',\n                        x: 12 + measureShapeBbox.width + 4,\n                        y: 56,\n                        fontFamily: 'PingFangSC',\n                        fontSize: 20,\n                        fontWeight: 500,\n                        lineHeight: 28,\n                        textBaseline: 'top',\n                        fill: textColor,\n                        opacity: 0.85,\n                    },\n                    name: 'node-measure-unit',\n                    draggable: true,\n                });\n            }\n            // 相关指标信息\n            relatedMeasures.forEach(function (relatedMeasure, index) {\n                var showFormattedValue = relatedMeasure.formattedValue !== undefined;\n                var relatedMeasureText = \"\".concat(relatedMeasure.name, \" \").concat(showFormattedValue ? relatedMeasure.formattedValue : relatedMeasure.value).concat(showFormattedValue && relatedMeasure.formattedUnit);\n                group === null || group === void 0 ? void 0 : group.addShape('text', {\n                    attrs: {\n                        text: relatedMeasureText,\n                        x: 12,\n                        y: 95,\n                        fontFamily: 'PingFangSC',\n                        fontSize: 12,\n                        fontWeight: 400,\n                        lineHeight: 17,\n                        textBaseline: 'top',\n                        fill: textColor,\n                        opacity: 0.45,\n                    },\n                    name: \"node-releted-measure-\".concat(index),\n                    draggable: true,\n                });\n            });\n            return keyShape;\n        },\n        setState: function (name, value, node) {\n            // 设置状态样式\n            setItemStateStyle(node, 'node');\n        },\n    });\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}