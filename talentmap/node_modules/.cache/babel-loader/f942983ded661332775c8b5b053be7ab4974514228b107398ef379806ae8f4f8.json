{"ast":null,"code":"/** 超出省略，不够精准 */\nexport var setEllipsis = function (text, fontStyle, contentWidth) {\n  if (contentWidth === void 0) {\n    contentWidth = 120;\n  }\n  var _a = fontStyle.fontSize,\n    fontSize = _a === void 0 ? 12 : _a,\n    _b = fontStyle.fontWeight,\n    fontWeight = _b === void 0 ? 'normal' : _b,\n    _c = fontStyle.fontFamily,\n    fontFamily = _c === void 0 ? 'Arial, sans-serif' : _c;\n  var canvas = document.querySelector('canvas');\n  var ctx = canvas.getContext('2d');\n  ctx.font = \"\".concat(fontSize, \"px \").concat(fontWeight, \" \").concat(fontFamily);\n  var currentText = text;\n  var flag = false;\n  ctx.fillText(currentText, 0, 0);\n  if (text.length === 1) {\n    return text;\n  }\n  for (var i = text.length - 1; i > 0; i--) {\n    var width = ctx.measureText(currentText).width;\n    if (width <= contentWidth) {\n      if (!flag) return currentText;\n      // 中文结尾删除最后一位、非中文结尾删除最后2位\n      var reg = /[\\u4e00-\\u9fa5]/;\n      var lastStr = currentText.substring(currentText.length - 1, currentText.length);\n      return currentText.substring(0, currentText.length - (reg.test(lastStr) ? 1 : 2)) + '...';\n    } else {\n      flag = true;\n      currentText = currentText.substring(0, currentText.length - 1);\n    }\n  }\n};","map":{"version":3,"names":["setEllipsis","text","fontStyle","contentWidth","_a","fontSize","_b","fontWeight","_c","fontFamily","canvas","document","querySelector","ctx","getContext","font","concat","currentText","flag","fillText","length","i","width","measureText","reg","lastStr","substring","test"],"sources":["/Users/invotradesign/CascadeProjects/site-users-app/node_modules/@ant-design/graphs/es/utils/set-ellipsis.js"],"sourcesContent":["/** 超出省略，不够精准 */\nexport var setEllipsis = function (text, fontStyle, contentWidth) {\n    if (contentWidth === void 0) { contentWidth = 120; }\n    var _a = fontStyle.fontSize, fontSize = _a === void 0 ? 12 : _a, _b = fontStyle.fontWeight, fontWeight = _b === void 0 ? 'normal' : _b, _c = fontStyle.fontFamily, fontFamily = _c === void 0 ? 'Arial, sans-serif' : _c;\n    var canvas = document.querySelector('canvas');\n    var ctx = canvas.getContext('2d');\n    ctx.font = \"\".concat(fontSize, \"px \").concat(fontWeight, \" \").concat(fontFamily);\n    var currentText = text;\n    var flag = false;\n    ctx.fillText(currentText, 0, 0);\n    if (text.length === 1) {\n        return text;\n    }\n    for (var i = text.length - 1; i > 0; i--) {\n        var width = ctx.measureText(currentText).width;\n        if (width <= contentWidth) {\n            if (!flag)\n                return currentText;\n            // 中文结尾删除最后一位、非中文结尾删除最后2位\n            var reg = /[\\u4e00-\\u9fa5]/;\n            var lastStr = currentText.substring(currentText.length - 1, currentText.length);\n            return currentText.substring(0, currentText.length - (reg.test(lastStr) ? 1 : 2)) + '...';\n        }\n        else {\n            flag = true;\n            currentText = currentText.substring(0, currentText.length - 1);\n        }\n    }\n};\n"],"mappings":"AAAA;AACA,OAAO,IAAIA,WAAW,GAAG,SAAAA,CAAUC,IAAI,EAAEC,SAAS,EAAEC,YAAY,EAAE;EAC9D,IAAIA,YAAY,KAAK,KAAK,CAAC,EAAE;IAAEA,YAAY,GAAG,GAAG;EAAE;EACnD,IAAIC,EAAE,GAAGF,SAAS,CAACG,QAAQ;IAAEA,QAAQ,GAAGD,EAAE,KAAK,KAAK,CAAC,GAAG,EAAE,GAAGA,EAAE;IAAEE,EAAE,GAAGJ,SAAS,CAACK,UAAU;IAAEA,UAAU,GAAGD,EAAE,KAAK,KAAK,CAAC,GAAG,QAAQ,GAAGA,EAAE;IAAEE,EAAE,GAAGN,SAAS,CAACO,UAAU;IAAEA,UAAU,GAAGD,EAAE,KAAK,KAAK,CAAC,GAAG,mBAAmB,GAAGA,EAAE;EACxN,IAAIE,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;EAC7C,IAAIC,GAAG,GAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;EACjCD,GAAG,CAACE,IAAI,GAAG,EAAE,CAACC,MAAM,CAACX,QAAQ,EAAE,KAAK,CAAC,CAACW,MAAM,CAACT,UAAU,EAAE,GAAG,CAAC,CAACS,MAAM,CAACP,UAAU,CAAC;EAChF,IAAIQ,WAAW,GAAGhB,IAAI;EACtB,IAAIiB,IAAI,GAAG,KAAK;EAChBL,GAAG,CAACM,QAAQ,CAACF,WAAW,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,IAAIhB,IAAI,CAACmB,MAAM,KAAK,CAAC,EAAE;IACnB,OAAOnB,IAAI;EACf;EACA,KAAK,IAAIoB,CAAC,GAAGpB,IAAI,CAACmB,MAAM,GAAG,CAAC,EAAEC,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;IACtC,IAAIC,KAAK,GAAGT,GAAG,CAACU,WAAW,CAACN,WAAW,CAAC,CAACK,KAAK;IAC9C,IAAIA,KAAK,IAAInB,YAAY,EAAE;MACvB,IAAI,CAACe,IAAI,EACL,OAAOD,WAAW;MACtB;MACA,IAAIO,GAAG,GAAG,iBAAiB;MAC3B,IAAIC,OAAO,GAAGR,WAAW,CAACS,SAAS,CAACT,WAAW,CAACG,MAAM,GAAG,CAAC,EAAEH,WAAW,CAACG,MAAM,CAAC;MAC/E,OAAOH,WAAW,CAACS,SAAS,CAAC,CAAC,EAAET,WAAW,CAACG,MAAM,IAAII,GAAG,CAACG,IAAI,CAACF,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,KAAK;IAC7F,CAAC,MACI;MACDP,IAAI,GAAG,IAAI;MACXD,WAAW,GAAGA,WAAW,CAACS,SAAS,CAAC,CAAC,EAAET,WAAW,CAACG,MAAM,GAAG,CAAC,CAAC;IAClE;EACJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}